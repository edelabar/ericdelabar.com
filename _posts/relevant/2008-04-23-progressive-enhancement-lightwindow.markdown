---
layout: post
title: Progressive Enhancement and LightWindow by Eric DeLabar
metadesc: 
class: post
changefreq: never
priority: 0.9
category: relevant
---
<h1>Progressive Enhancement and LightWindow</h1>
<p>Nothing says Web 2.0 like a lightbox, those nifty, little, modal dialogs that let you create pop-up-like functionality without the worry of pop-up blockers.  There are quite a few variations of this concept, including <a href="http://www.huddletogether.com/projects/lightbox/">Lightbox <span class="caps">JS</span></a> (and its many variants including <a href="http://particletree.com/features/lightbox-gone-wild/">Lightbox Gone Wild</a> by <a href="http://particletree.com/">the makers of</a> <a href="http://wufoo.com/">Wufoo</a>), <a href="http://www.digitalia.be/software/slimbox">Slimbox</a>, and my personal favorite <a href="http://www.stickmanlabs.com/lightwindow/">LightWindow</a>.  In general, they're all pretty <a href="http://en.wikipedia.org/wiki/Unobtrusive_JavaScript">unobtrusive</a>, but in this little tutorial I'm going to kick up the <a href="http://en.wikipedia.org/wiki/Progressive_Enhancement">progressive enhancement</a> a notch and make LightWindow even&nbsp;better!</p>
<p>Let's start with a client who wants to use a lightbox to display a multi-view image viewer for an e-commerce site.  In true progressive enhancement fashion, if JavaScript is disabled, <em>the user should still be able to perform the basic functionality of the site</em>.  So, let's assume our site has a simple layout with a header, a footer, and a main content area that <a href="http://www.ericdelabar.com/examples/progressive-enhancement-lightwindow/">looks something like this</a>.  When JavaScript is disabled the image viewer should show up with the header and footer, when it's enabled, it should show up in a lightbox without the header and footer.  So how do we do&nbsp;it?</p>
<p>LightWindow can be used to display any given webpage by simply setting the class of a link to that webpage to <code>lightwindow</code>.  Simple enough.  When the lightwindow.js file loads it searches your document for anchor elements with a class of <code>lightwindow</code> and adds the necessary <code>onclick</code> handler to make the link open in a lightbox instead of as a normal page, as unobtrusive as it gets.  However, since we want our result page to look differently depending on whether it's being displayed as a lightwindow or a regular page, we need some way to tell our back-end the display form-factor.  To accomplish that we'll add my own little progressive enhancement to the&nbsp;page.</p>

{% render_gist https://gist.github.com/raw/885496/a5c1f29a62a7145f7e45813ed168c5076d0d5e0b/progressive-enhancement-lightwindow.js %}

<p>This is simple enough <a href="http://prototypejs.org/">prototype.js</a> JavaScript code that crawls the <acronym title="Document Object Model"><span class="caps">DOM</span></acronym> for elements with a class set to lightwindow and adds a parameter of <code>lightwindow=true</code> to the <code>href</code> attribute.  With this parameter in place, the back-end now knows which form-factor to use when rendering the page and we can accomplish our goal with some simple <a href="http://www.php.net/"><span class="caps">PHP</span></a> code. (Pardon my <span class="caps">PHP</span>, I'm by no means a <span class="caps">PHP</span> expert, this is only meant to be a simple&nbsp;example.):</p>

{% render_gist https://gist.github.com/raw/885496/59ccc0128f30ba6f5d00ce67d62e9054a1e6930b/progressive-enhancement-lightwindow.php %}

<p>Problem solved, <a href="http://www.ericdelabar.com/examples/progressive-enhancement-lightwindow/">have a look here and click on the "this link" link</a>.  Of course there are a few more programming alternative along these lines, including modifying the LightWindow object at runtime to prevent a second crawl of the <span class="caps">DOM</span> for elements with the <code>lightwindow</code> class, theoretically improving performance, but I'm going to leave that for another&nbsp;article.</p>
<p>As an interesting side benefit to this technique, web crawlers like the <a href="http://en.wikipedia.org/wiki/Googlebot">Googlebot</a>, which don't interpret JavaScript, will follow the link to the lightbox page and receive a full page as opposed to just the page content. This Allows the robot to continue crawling your site through the navigation and also allows it to see your page title and meta tags.  Now, just a little forewarning, be careful with this technique, if you abuse it, it may be considered <a href="http://en.wikipedia.org/wiki/Cloaking">cloaking</a> any you could have your site delisted for violating the <a href="http://www.google.com/support/webmasters/bin/answer.py?hl=en&amp;answer=35769">webmaster guidelines</a>.  So in other words, use this technique to provide context and don't try and stuff the pages with keywords or do anything&nbsp;underhanded.</p>